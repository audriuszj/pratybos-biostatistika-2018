!function(){function maybeInstallCrosstalkPlugins(){crosstalkPluginsInstalled||(crosstalkPluginsInstalled=!0,$.fn.dataTable.ext.afnFiltering.push(function(oSettings,aData,iDataIndex){var ctfilter=oSettings.nTable.ctfilter;if(ctfilter&&!ctfilter[iDataIndex])return!1;var ctselect=oSettings.nTable.ctselect;return ctselect&&!ctselect[iDataIndex]?!1:!0}))}var DTWidget={},markInterval=function(d,digits,interval,mark,decMark,precision){if(x=precision?d.toPrecision(digits):d.toFixed(digits),!/^-?[\d.]+$/.test(x))return x;var xv=x.split(".");return xv.length>2?x:(xv[0]=xv[0].replace(new RegExp("\\B(?=(\\d{"+interval+"})+(?!\\d))","g"),mark),xv.join(decMark))};DTWidget.formatCurrency=function(thiz,row,data,col,currency,digits,interval,mark,decMark,before){var d=parseFloat(data[col]);if(!isNaN(d)){var res=markInterval(d,digits,interval,mark,decMark);res=before?/^-/.test(res)?"-"+currency+res.replace(/^-/,""):currency+res:res+currency,$(thiz.api().cell(row,col).node()).html(res)}},DTWidget.formatString=function(thiz,row,data,col,prefix,suffix){var d=data[col];null!==d&&$(thiz.api().cell(row,col).node()).html(prefix+d+suffix)},DTWidget.formatPercentage=function(thiz,row,data,col,digits,interval,mark,decMark){var d=parseFloat(data[col]);isNaN(d)||$(thiz.api().cell(row,col).node()).html(markInterval(100*d,digits,interval,mark,decMark)+"%")},DTWidget.formatRound=function(thiz,row,data,col,digits,interval,mark,decMark){var d=parseFloat(data[col]);isNaN(d)||$(thiz.api().cell(row,col).node()).html(markInterval(d,digits,interval,mark,decMark))},DTWidget.formatSignif=function(thiz,row,data,col,digits,interval,mark,decMark){var d=parseFloat(data[col]);isNaN(d)||$(thiz.api().cell(row,col).node()).html(markInterval(d,digits,interval,mark,decMark,!0))},DTWidget.formatDate=function(thiz,row,data,col,method,params){var d=data[col];null!==d&&("toDateString"===method&&/^\d{4,}\D\d{2}\D\d{2}$/.test(d)?(d=d.split(/\D/),d=new Date(d[0],d[1]-1,d[2])):d=new Date(d),$(thiz.api().cell(row,col).node()).html(d[method].apply(d,params)))},window.DTWidget=DTWidget;var transposeArray2D=function(a){return 0===a.length?a:HTMLWidgets.transposeArray2D(a)},crosstalkPluginsInstalled=!1;HTMLWidgets.widget({name:"datatables",type:"output",renderOnNullValue:!0,initialize:function(el){return $(el).html("&nbsp;"),{data:null,ctfilterHandle:new crosstalk.FilterHandle,ctfilterSubscription:null,ctselectHandle:new crosstalk.SelectionHandle,ctselectSubscription:null}},renderValue:function(el,data,instance){function keysToMatches(keys){if(keys){for(var selectedKeys={},i=0;i<keys.length;i++)selectedKeys[keys[i]]=!0;for(var matches={},j=0;j<key.length;j++)selectedKeys[key[j]]&&(matches[j]=!0);return matches}return null}function applyCrosstalkFilter(e){$table[0].ctfilter=keysToMatches(e.value),table.draw()}function applyCrosstalkSelection(e){e.sender!==instance.ctselectHandle&&(table.rows("."+selClass,{search:"applied"}).nodes().to$().removeClass(selClass),selectedRows&&changeInput("rows_selected",selectedRows(),void 0,!0)),e.sender!==instance.ctselectHandle&&e.value&&e.value.length?($table[0].ctselect=keysToMatches(e.value),table.draw()):$table[0].ctselect&&($table[0].ctselect=null,table.draw())}if(0===el.offsetWidth||0===el.offsetHeight)return void(instance.data=data);instance.data=null;var $el=$(el);if($el.empty(),null===data){$el.append("&nbsp;");for(var i in instance.clearInputs)instance.clearInputs[i]();return void(instance.clearInputs={})}var crosstalkOptions=data.crosstalkOptions;crosstalkOptions||(crosstalkOptions={key:null,group:null}),crosstalkOptions.group&&(maybeInstallCrosstalkPlugins(),instance.ctfilterHandle.setGroup(crosstalkOptions.group),instance.ctselectHandle.setGroup(crosstalkOptions.group)),window.FlexDashboard&&!window.FlexDashboard.isFillPage()&&(data.options.bPaginate=!0,data.fillContainer=!1),window.HTMLWidgets.viewerMode&&(data.hasOwnProperty("fillContainer")||(data.fillContainer=!0),data.hasOwnProperty("autoHideNavigation")||(data.autoHideNavigation=!0)),instance.fillContainer=data.fillContainer;var cells=data.data;cells instanceof Array&&(cells=transposeArray2D(cells)),$el.append(data.container);var $table=$el.find("table");data["class"]&&$table.addClass(data["class"]),data.caption&&$table.prepend(data.caption),HTMLWidgets.shinyMode&&"none"!==data.selection.mode&&"row+column"===data.selection.target&&0===$table.children("tfoot").length&&($table.append($("<tfoot>")),$table.find("thead tr").clone().appendTo($table.find("tfoot")));var filterRow;switch(data.filter){case"top":$table.children("thead").append(data.filterHTML),filterRow=$table.find("thead tr:last td");break;case"bottom":0===$table.children("tfoot").length&&$table.append($("<tfoot>")),$table.children("tfoot").prepend(data.filterHTML),filterRow=$table.find("tfoot tr:first td")}var options={searchDelay:1e3};null!==cells&&$.extend(options,{data:cells});var bootstrapActive="undefined"!=typeof $.fn.popover;instance.fillContainer&&(options.scrollX=!0,options.scrollY="100px",data.options.bPaginate===!1&&(bootstrapActive&&(options.dom="<'row'<'col-sm-4'i><'col-sm-8'f>><'row'<'col-sm-12'tr>>"),options.fnInfoCallback=function(oSettings,iStart,iEnd,iMax,iTotal){return Number(iTotal).toLocaleString()+" records"})),data.autoHideNavigation===!0&&bootstrapActive&&data.options.bPaginate!==!1&&(cells instanceof Array&&data.options.iDisplayLength>=cells.length?options.dom="<'row'<'col-sm-12'tr>>":window.FlexDashboard&&window.FlexDashboard.isMobilePhone()&&(options.dom="<'row'<'col-sm-12'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>")),$.extend(!0,options,data.options||{});var searchCols=options.searchCols;searchCols&&(searchCols=searchCols.map(function(x){return null===x?"":x.search}),delete options.searchCols);var server=options.serverSide===!0,DT_rows_all=[],DT_rows_current=[];server&&HTMLWidgets.shinyMode&&"object"==typeof options.ajax&&/^session\/[\da-z]+\/dataobj/.test(options.ajax.url)&&!options.ajax.dataSrc&&(options.ajax.dataSrc=function(json){return DT_rows_all=$.makeArray(json.DT_rows_all),DT_rows_current=$.makeArray(json.DT_rows_current),json.data});var thiz=this;instance.fillContainer&&$table.on("init.dt",function(){thiz.fillAvailableHeight(el,$(el).innerHeight())});var table=$table.DataTable(options);if($el.data("datatable",table),instance.ctfilterSubscription&&(instance.ctfilterHandle.off("change",instance.ctfilterSubscription),instance.ctfilterSubscription=null),instance.ctselectSubscription&&(instance.ctselectHandle.off("change",instance.ctselectSubscription),instance.ctselectSubscription=null),crosstalkOptions.group){var key=crosstalkOptions.key;instance.ctfilterSubscription=instance.ctfilterHandle.on("change",applyCrosstalkFilter),applyCrosstalkFilter({value:instance.ctfilterHandle.filteredKeys}),instance.ctselectSubscription=instance.ctselectHandle.on("change",applyCrosstalkSelection),applyCrosstalkSelection({value:instance.ctselectHandle.value})}else $table[0].ctfilter=null,$table[0].ctselect=null;var inArray=function(val,array){return $.inArray(val,$.makeArray(array))>-1},encode_plus=function(x){return server?x.replace(/%/g,"%25").replace(/\+/g,"%2B"):x},searchColumn=function(i,value){var regex=!1,ci=!0;return options.search&&(regex=options.search.regex,ci=options.search.caseInsensitive!==!1),table.column(i).search(encode_plus(value),regex,!regex,ci)};"none"!==data.filter&&filterRow.each(function(i,td){var filter,$td=$(td),type=$td.data("type"),$input=$td.children("div").first().children("input");$input.prop("disabled",!table.settings()[0].aoColumns[i].bSearchable||"disabled"===type),$input.on("input blur",function(){$input.next("span").toggle(Boolean($input.val()))}),$input.next("span").css("pointer-events","auto").hide().click(function(){$(this).hide().prev("input").val("").trigger("input").focus()});var searchCol;searchCols&&searchCols[i]&&(searchCol=searchCols[i],$input.val(searchCol).trigger("input"));var $x=$td.children("div").last(),scrollHead=$(el).find(".dataTables_scrollHead,.dataTables_scrollFoot"),cssOverflow=scrollHead.css("overflow");if("hidden"===cssOverflow&&($x.on("show hide",function(e){scrollHead.css("overflow","show"===e.type?"":cssOverflow)}),$x.css("z-index",25)),inArray(type,["factor","logical"])){$input.on({click:function(){$input.parent().hide(),$x.show().trigger("show"),filter[0].selectize.focus()},input:function(){""===$input.val()&&filter[0].selectize.setValue([])}});var $input2=$x.children("select");filter=$input2.selectize({options:$input2.data("options").map(function(v){return{text:v,value:v}}),plugins:["remove_button"],hideSelected:!0,onChange:function(value){return null===value&&(value=[]),$input.val(value.length?JSON.stringify(value):""),value.length&&$input.trigger("input"),$input.attr("title",$input.val()),server?void table.column(i).search(value.length?encode_plus(JSON.stringify(value)):"").draw():($td.data("filter",value.length>0),void table.draw())}}),searchCol&&filter[0].selectize.setValue(JSON.parse(searchCol)),$x.find("div > div.selectize-input > input").on("blur",function(){$x.hide().trigger("hide"),$input.parent().show(),$input.trigger("blur")}),filter.next("div").css("margin-bottom","auto")}else if("character"===type){var fun=function(){searchColumn(i,$input.val()).draw()};server&&(fun=$.fn.dataTable.util.throttle(fun,options.searchDelay)),$input.on("input",fun)}else if(inArray(type,["number","integer","date","time"])){var $x0=$x;$x=$x0.children("div").first(),$x0.css({"background-color":"#fff",border:"1px #ddd solid","border-radius":"4px",padding:"20px 20px 10px 20px"});var $spans=$x0.children("span").css({"margin-top":"10px","white-space":"nowrap"}),$span1=$spans.first(),$span2=$spans.last(),r1=+$x.data("min"),r2=+$x.data("max"),scale=Math.pow(10,Math.max(0,+$x.data("scale")||0));r1=Math.round(r1*scale),r2=Math.round(r2*scale);var scaleBack=function(x,scale){if(1===scale)return x;var d=Math.round(Math.log(scale)/Math.log(10));return(x/scale).toFixed(d)};$input.on({focus:function(){$x0.show().trigger("show"),$x0.width(Math.max(160,$span1.outerWidth()+$span2.outerWidth()+20)),$x0.outerWidth()<$input.outerWidth()&&$x0.outerWidth($input.outerWidth()),$(window).width()<$x0.offset().left+$x0.width()&&$x0.offset({left:$input.offset().left+$input.outerWidth()-$x0.outerWidth()})},blur:function(){$x0.hide().trigger("hide")},input:function(){""===$input.val()&&filter.val([r1,r2])},change:function(){var v=$input.val().replace(/\s/g,"");if(""!==v){if(v=v.split("..."),2!==v.length)return void $input.parent().addClass("has-error");""===v[0]&&(v[0]=r1),""===v[1]&&(v[1]=r2),$input.parent().removeClass("has-error");var strTime=function(x){var s="date"===type?"T00:00:00Z":"",t=new Date(x+s).getTime();return"date"===type?t+36e5:t};inArray(type,["date","time"])&&(v[0]=strTime(v[0]),v[1]=strTime(v[1])),v[0]!=r1&&(v[0]*=scale),v[1]!=r2&&(v[1]*=scale),filter.val(v)}}});var formatDate=function(d){if(d=scaleBack(d,scale),"number"===type)return d;if("integer"===type)return parseInt(d);var x=new Date(+d);if("date"===type){var pad0=function(x){return("0"+x).substr(-2,2)};return x.getUTCFullYear()+"-"+pad0(1+x.getUTCMonth())+"-"+pad0(x.getUTCDate())}return x.toISOString()},opts="date"===type?{step:36e5}:"integer"===type?{step:1}:{};filter=$x.noUiSlider($.extend({start:[r1,r2],range:{min:r1,max:r2},connect:!0},opts)),scale>1&&function(){for(var t1=r1,t2=r2,val=filter.val();val[0]>r1||val[1]<r2;)val[0]>r1&&(t1-=val[0]-r1),val[1]<r2&&(t2+=r2-val[1]),filter=$x.noUiSlider($.extend({start:[t1,t2],range:{min:t1,max:t2},connect:!0},opts),!0),val=filter.val();r1=t1,r2=t2}(),$span1.text(formatDate(r1)),$span2.text(formatDate(r2));var updateSlider=function(e){var val=filter.val();$td.data("filter",val[0]>r1||val[1]<r2);var ival,v1=formatDate(val[0]),v2=formatDate(val[1]);return $td.data("filter")?(ival=v1+" ... "+v2,$input.attr("title",ival).val(ival).trigger("input")):$input.attr("title","").val(""),$span1.text(v1),$span2.text(v2),"slide"!==e.type?server?void table.column(i).search($td.data("filter")?ival:"").draw():void table.draw():void 0};filter.on({set:updateSlider,slide:updateSlider})}if(server)return void(searchCol&&searchColumn(i,searchCol).draw());var customFilter=function(settings,data){if(table.settings()[0]!==settings)return!0;if("undefined"==typeof filter||!$td.data("filter"))return!0;var v,r0,r1,r=filter.val();if("number"===type||"integer"===type){if(v=parseFloat(data[i]),isNaN(v))return!1;if(r0=parseFloat(scaleBack(r[0],scale)),r1=parseFloat(scaleBack(r[1],scale)),v>=r0&&r1>=v)return!0}else if("date"===type||"time"===type){if(v=new Date(data[i]),r0=new Date(r[0]/scale),r1=new Date(r[1]/scale),v>=r0&&r1>=v)return!0}else if("factor"===type){if(0===r.length||inArray(data[i],r))return!0}else if("logical"===type){if(0===r.length)return!0;if(inArray(""===data[i]?"na":data[i],r))return!0}return!1};$.fn.dataTable.ext.search.push(customFilter),searchCol&&(inArray(type,["factor","logical"])?filter[0].selectize.setValue(JSON.parse(searchCol)):"character"===type?$input.trigger("input"):inArray(type,["number","integer","date","time"])&&$input.trigger("change"))});var highlight=function(){var body=$(table.table().body());body.unhighlight(),0!==table.rows({filter:"applied"}).data().length&&(body.highlight($.trim(table.search()).split(/\s+/)),filterRow&&filterRow.each(function(i,td){var $td=$(td),type=$td.data("type");if("character"===type){var $input=$td.children("div").first().children("input"),column=table.column(i).nodes().to$(),val=$.trim($input.val());"character"===type&&""!==val&&column.highlight(val.split(/\s+/))}}))};if(options.searchHighlight&&(table.on("draw.dt.dth column-visibility.dt.dth column-reorder.dt.dth",highlight).on("destroy",function(){table.off("draw.dt.dth column-visibility.dt.dth column-reorder.dt.dth")}),highlight()),"function"==typeof data.callback&&data.callback(table),data.editable&&table.on("dblclick.dt","tbody td",function(){var $input=$('<input type="text">'),$this=$(this),value=table.cell(this).data(),html=$this.html(),changed=!1;$input.val(value),$this.empty().append($input),$input.css("width","100%").focus().on("change",function(){changed=!0;var valueNew=$input.val();valueNew!=value?(table.cell($this).data(valueNew),HTMLWidgets.shinyMode&&changeInput("cell_edit",cellInfo($this)),server||table.draw(!1)):$this.html(html),$input.remove()}).on("blur",function(){changed||$input.trigger("change")})}),HTMLWidgets.shinyMode||crosstalkOptions.group){var methods={},shinyData={};methods.updateCaption=function(caption){caption&&$table.children("caption").replaceWith(caption)},instance.clearInputs={};var changeInput=function(id,value,type,noCrosstalk){var event=id;if(id=el.id+"_"+id,type&&(id=id+":"+type),(!shinyData.hasOwnProperty(id)||shinyData[id]!==JSON.stringify(value))&&(shinyData[id]=JSON.stringify(value),HTMLWidgets.shinyMode&&(Shiny.onInputChange(id,value),instance.clearInputs[id]||(instance.clearInputs[id]=function(){Shiny.onInputChange(id,null)})),"rows_selected"===event&&!noCrosstalk&&crosstalkOptions.group)){var keys=crosstalkOptions.key,selectedKeys=null;if(value){selectedKeys=[];for(var i=0;i<value.length;i++)selectedKeys.push(keys[value[i]-1])}instance.ctselectHandle.set(selectedKeys)}},addOne=function(x){return x.map(function(i){return 1+i})},unique=function(x){var ux=[];return $.each(x,function(i,el){-1===$.inArray(el,ux)&&ux.push(el)}),ux},tweakCellIndex=function(cell){var info=cell.index();return server?info.row=DT_rows_current[info.row]:info.row+=1,{row:info.row,col:info.column}},selMode=data.selection.mode,selTarget=data.selection.target;if(inArray(selMode,["single","multiple"])){var selected1,selected2,selClass="bootstrap"===data.style?"active":"selected",selected=data.selection.selected;null===selected?selected1=selected2=[]:"row"===selTarget?selected1=$.makeArray(selected):"column"===selTarget?selected2=$.makeArray(selected):"row+column"===selTarget&&(selected1=$.makeArray(selected.rows),selected2=$.makeArray(selected.cols));var lastClickedRow,shiftSelRowsIndex=function(start,end){var indexes=server?DT_rows_all:table.rows({search:"applied"}).indexes().toArray();if(start=indexes.indexOf(start),end=indexes.indexOf(end),start>end){var tmp=end;end=start,start=tmp}return indexes.slice(start,end+1)},serverRowIndex=function(clientRowIndex){return server?DT_rows_current[clientRowIndex]:clientRowIndex+1};if(inArray(selTarget,["row","row+column"])){var selectedRows=function(){var rows=table.rows("."+selClass),idx=rows.indexes().toArray();return server?(idx=idx.map(function(i){return DT_rows_current[i]}),selected1="multiple"===selMode?unique(selected1.concat(idx)):idx):addOne(idx)};table.on("mousedown.dt","tbody tr",function(e){var $this=$(this),thisRow=table.row(this);if("multiple"===selMode)if(e.shiftKey&&void 0!==lastClickedRow){var flagSel=!$this.hasClass(selClass),crtClickedRow=serverRowIndex(thisRow.index());if(server){var rowsIndex=shiftSelRowsIndex(lastClickedRow,crtClickedRow);rowsIndex.map(function(i){var rowIndex=DT_rows_current.indexOf(i);if(rowIndex>=0){var row=table.row(rowIndex).nodes().to$(),flagRowSel=!row.hasClass(selClass);flagSel===flagRowSel&&row.toggleClass(selClass)}}),selected1=flagSel?unique(selected1.concat(rowsIndex)):selected1.filter(function(index){return!inArray(index,rowsIndex)})}else shiftSelRowsIndex(lastClickedRow-1,crtClickedRow-1).map(function(value){var row=table.row(value).nodes().to$(),flagRowSel=!row.hasClass(selClass);flagSel===flagRowSel&&row.toggleClass(selClass)});e.preventDefault()}else $this.toggleClass(selClass);else $this.hasClass(selClass)?$this.removeClass(selClass):(table.$("tr."+selClass).removeClass(selClass),$this.addClass(selClass));if(server&&!$this.hasClass(selClass)){var id=DT_rows_current[thisRow.index()];inArray(id,selected1)&&selected1.splice($.inArray(id,selected1),1)}changeInput("rows_selected",selectedRows()),changeInput("row_last_clicked",serverRowIndex(thisRow.index())),lastClickedRow=serverRowIndex(thisRow.index())}),changeInput("rows_selected",selected1);var selectRows=function(){if(table.$("tr."+selClass).removeClass(selClass),0!==selected1.length)if(server)table.rows({page:"current"}).every(function(){inArray(DT_rows_current[this.index()],selected1)&&$(this.node()).addClass(selClass)});else{var selected0=selected1.map(function(i){return i-1});$(table.rows(selected0).nodes()).addClass(selClass)}};selectRows(),server&&table.on("draw.dt",selectRows),methods.selectRows=function(selected){selected1=selected?selected:[],selectRows(),changeInput("rows_selected",selected1)}}if(inArray(selTarget,["column","row+column"])){"row+column"===selTarget&&$(table.columns().footer()).css("cursor","pointer"),table.on("click.dt","column"===selTarget?"tbody td":"tfoot tr th",function(){var colIdx="column"===selTarget?table.cell(this).index().column:$.inArray(this,table.columns().footer()),thisCol=$(table.column(colIdx).nodes());-1!==colIdx&&(thisCol.hasClass(selClass)?(thisCol.removeClass(selClass),selected2.splice($.inArray(colIdx,selected2),1)):("single"===selMode&&$(table.cells().nodes()).removeClass(selClass),thisCol.addClass(selClass),selected2="single"===selMode?[colIdx]:unique(selected2.concat([colIdx]))),changeInput("columns_selected",selected2))}),changeInput("columns_selected",selected2);var selectCols=function(){table.columns().nodes().flatten().to$().removeClass(selClass),selected2.length>0&&table.columns(selected2).nodes().flatten().to$().addClass(selClass)};selectCols(),server&&table.on("draw.dt",selectCols),methods.selectColumns=function(selected){selected2=selected?selected:[],selectCols(),changeInput("columns_selected",selected2)}}if("cell"===selTarget){var selected3;selected3=null===selected?[]:selected;var findIndex=function(ij){for(var i=0;i<selected3.length;i++)if(ij[0]===selected3[i][0]&&ij[1]===selected3[i][1])return i;return-1};table.on("click.dt","tbody td",function(){var $this=$(this),info=tweakCellIndex(table.cell(this));$this.hasClass(selClass)?($this.removeClass(selClass),selected3.splice(findIndex([info.row,info.col]),1)):("single"===selMode&&$(table.cells().nodes()).removeClass(selClass),$this.addClass(selClass),selected3="single"===selMode?[[info.row,info.col]]:unique(selected3.concat([[info.row,info.col]]))),changeInput("cells_selected",transposeArray2D(selected3),"shiny.matrix")}),changeInput("cells_selected",transposeArray2D(selected3),"shiny.matrix");var selectCells=function(){table.$("td."+selClass).removeClass(selClass),0!==selected3.length&&(server?table.cells({page:"current"}).every(function(){var info=tweakCellIndex(this);findIndex([info.row,info.col],selected3)>-1&&$(this.node()).addClass(selClass)}):selected3.map(function(ij){$(table.cell(ij[0]-1,ij[1]).node()).addClass(selClass)}))};selectCells(),server&&table.on("draw.dt",selectCells),methods.selectCells=function(selected){selected3=selected?selected:[],selectCells(),changeInput("cells_selected",transposeArray2D(selected3),"shiny.matrix")}}}var updateTableInfo=function(){var updateRowInfo=function(id,modifier){var idx;if(server)idx="current"===modifier.page?DT_rows_current:DT_rows_all;else{var rows=table.rows($.extend({search:"applied",page:"all"},modifier));idx=addOne(rows.indexes().toArray())}changeInput("rows_"+id,idx)};updateRowInfo("current",{page:"current"}),updateRowInfo("all",{})};table.on("draw.dt",updateTableInfo),updateTableInfo(),table.on("draw.dt column-visibility.dt",function(){changeInput("state",table.state())}),changeInput("state",table.state());var updateSearchInfo=function(){changeInput("search",table.search()),filterRow&&changeInput("search_columns",filterRow.toArray().map(function(td){return $(td).find("input").first().val()}))};table.on("draw.dt",updateSearchInfo),updateSearchInfo();var cellInfo=function(thiz){var info=tweakCellIndex(table.cell(thiz));return info.value=table.cell(thiz).data(),info};table.on("click.dt","tbody td",function(){changeInput("cell_clicked",cellInfo(this))}),changeInput("cell_clicked",{}),table.on("click.dt","tbody td a",function(e){""===this.className&&e.stopPropagation()}),methods.addRow=function(data,rowname){var data0=table.row(0).data(),n=data0.length,d=n-data.length;if(1===d)data=rowname.concat(data);else if(0!==d)throw console.log(data),console.log(data0),"New data must be of the same length as current data ("+n+")";table.row.add(data).draw()},methods.updateSearch=function(keywords){null!==keywords.global&&$(table.table().container()).find("input[type=search]").first().val(keywords.global).trigger("input");var columns=keywords.columns;filterRow&&null!==columns&&(filterRow.toArray().map(function(td,i){var v="string"==typeof columns?columns:columns[i];return"undefined"==typeof v?void console.log("The search keyword for column "+i+" is undefined"):($(td).find("input").first().val(v),void searchColumn(i,v))}),table.draw())},methods.selectPage=function(page){if(table.page.info().pages<page||1>page)throw"Selected page is out of range";table.page(page-1).draw(!1)},methods.reloadData=function(resetPaging,clearSelection){methods.selectRows&&inArray("row",clearSelection)&&methods.selectRows([]),methods.selectColumns&&inArray("column",clearSelection)&&methods.selectColumns([]),methods.selectCells&&inArray("cell",clearSelection)&&methods.selectCells([]),table.ajax.reload(null,resetPaging)},table.shinyMethods=methods}},resize:function(el,width,height,instance){instance.data&&this.renderValue(el,instance.data,instance),instance.fillContainer&&this.fillAvailableHeight(el,height),this.adjustWidth(el)},fillAvailableHeight:function(el,availableHeight){var dtWrapper=$(el).find("div.dataTables_wrapper"),dtScrollBody=$(el).find($("div.dataTables_scrollBody")),framingHeight=dtWrapper.innerHeight()-dtScrollBody.innerHeight(),scrollBodyHeight=availableHeight-framingHeight;dtScrollBody.height(scrollBodyHeight+"px")},adjustWidth:function(el){var $el=$(el),table=$el.data("datatable");table&&table.columns.adjust(),$el.find(".dataTables_scrollHeadInner").css("width","").children("table").css("margin-left","")}}),HTMLWidgets.shinyMode&&Shiny.addCustomMessageHandler("datatable-calls",function(data){var id=data.id,el=document.getElementById(id),table=el?$(el).data("datatable"):null;if(!table)return void console.log("Couldn't find table with id "+id);var methods=table.shinyMethods,call=data.call;methods[call.method]?methods[call.method].apply(table,call.args):console.log("Unknown method "+call.method)})}();
